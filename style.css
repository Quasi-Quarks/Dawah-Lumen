/* ============================
   Base / Variables
============================ */
:root{
  --max-feed: 756px;
  --ring-width: 2.4px;
  --gap: .4rem;
  --card-pad: 1.3rem .8rem;
  --avatar: 36px;
  --send-btn: 30px;
  --input-h: 30px;
  --headline-size: 2.7rem; /* desktop gets animation */
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}

*,
*::before,
*::after { box-sizing: border-box; }

body{ color:#fff; }

/* ============================
   App Shell / Background
============================ */
#body{
  margin:0;
  padding:0;
  height:100vh;
  width:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  background:
    linear-gradient(-45deg, rgba(0,31,61,.7), rgba(15,32,39,.7), rgba(44,83,100,.7), rgba(0,31,61,.7)),
    url('background.jpg') no-repeat center/cover;
  background-size: 400% 400%, cover;
  background-attachment: fixed;
  animation: animateBackground 15s ease infinite;
}

@keyframes animateBackground{
  0%   { background-position: 0% 50%, center; }
  50%  { background-position:100% 50%, center; }
  100% { background-position: 0% 50%, center; }
}

/* ============================
   Header
============================ */
h1{
  margin:3rem 0 0.25rem;
  text-align:center;
  width:100%;
  font-weight:700;
  font-size:var(--headline-size);
  letter-spacing:2px;
  font-family:'Orbitron', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background:linear-gradient(90deg,#00e5ff,#ff4081,#76ff03,#ffab00);
  background-size:400% 100%;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  text-shadow:0 0 20px rgba(0,229,255,.3);
  animation: gradientText 6s ease infinite;
}
@keyframes gradientText{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

.hint{color:#666;margin-bottom:1rem;display:none;}
#warn{display:none;}
.tiny{font-size:.85rem;color:#666;display:none;}
code{background:#f6f6f6;color:#111;padding:.1rem .3rem;border-radius:.25rem;display:none;}
#debugform{display:none;}

/* ============================
   Messages Feed
============================ */
#messages{
  display:flex;
  flex-direction:column;
  gap:var(--gap);
  max-width:var(--max-feed);
  width:90%;
  margin:0 auto;
}

.msg{
  display:flex;
  align-items:flex-start;
  gap:.6rem;
  padding:var(--card-pad);
  border-radius:.6rem;
  border:var(--ring-width) solid;   /* base for animated ring */
  animation: rotateBorder 4s linear infinite;
  /* start colors (will animate) */
  border-top-color:#ff4081;
  border-right-color:#00e5ff;
  border-bottom-color:#5fff03;
  border-left-color:#ffab00;
  background:rgba(0,0,0,.18);
  backdrop-filter:saturate(120%) blur(2px);
}
@keyframes rotateBorder{
  0%   {border-top-color:#ff4081;border-right-color:#00e5ff;border-bottom-color:#5fff03;border-left-color:#ffab00;}
  25%  {border-top-color:#00e5ff;border-right-color:#5fff03;border-bottom-color:#ffab00;border-left-color:#ff4081;}
  50%  {border-top-color:#5fff03;border-right-color:#ffab00;border-bottom-color:#ff4081;border-left-color:#00e5ff;}
  75%  {border-top-color:#ffab00;border-right-color:#ff4081;border-bottom-color:#00e5ff;border-left-color:#5fff03;}
  100% {border-top-color:#ff4081;border-right-color:#00e5ff;border-bottom-color:#5fff03;border-left-color:#ffab00;}
}

.msg .avatar{
  width:var(--avatar);
  height:var(--avatar);
  border-radius:50%;
  object-fit:cover;
  border:1px solid #ddd;
  margin:0 3px;
}

.msg .bubble{ flex:1; }
.msg .name{ font-weight:600; margin-bottom:.15rem; font-size:large; }

/* ============================
   Composer (fixed bottom bar)
============================ */
.formsend{
  position:fixed;
  bottom:6px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  justify-content:center;
  align-items:center;
  width:min(90vw, 900px);
  height:60px;
  max-height:60px;
  padding:0 .5rem;
}

form#form{
  display:flex;
  align-items:center;
  justify-content:space-between;
  width:100%;
  height:100%;
  gap:.4rem;
}

#chat{
  flex:1 1 auto;
  min-width:0;
  height:var(--input-h);
  max-height:var(--input-h);
  padding:.6rem .7rem;
  color:#111;
  border-radius:.5rem;
  border:none;
  outline:none;
}

button{
  cursor:pointer;
  background:none;
  border:none;
  width:var(--send-btn);
  height:var(--send-btn);
  min-width:var(--send-btn);
  min-height:var(--send-btn);
  max-width:var(--send-btn);
  max-height:var(--send-btn);
  background-image:url('send.png');
  background-size:100% 100%;
  background-repeat:no-repeat;
}

/* ============================
   Banners & Badges
============================ */
.userBadge{ display:flex; align-items:center; gap:.5rem; margin:.5rem 0 1rem; color:#888; }
.banner{ display:none; background:#f6fbff; border:1px solid #cde9ff; padding:.6rem .8rem; border-radius:.5rem; margin:.75rem 0; }
.banner.show{ display:block; }

/* ============================
   Portrait / Landscape tweaks
============================ */
@media (orientation:landscape){
  #chat{ width:100%; }
}

@media (orientation:portrait){
  .msg{ max-width:83vw; }
  .formsend{
    width:85vw;
    bottom:2px;
  }
}
